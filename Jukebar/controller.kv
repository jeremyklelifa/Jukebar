#:kivy 1.0
#:import label kivy.uix.label
#:import lv kivy.uix.listview
#:import sla kivy.adapters.simplelistadapter
#:import la kivy.adapters.listadapter
#:import Toolbar kivymd.toolbar.Toolbar
#:import NavigationDrawer kivymd.navigationdrawer.NavigationDrawer


<LoadDialog>:
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser
            path: root.path

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()

            Button:
                text: "Load"
                on_release: root.load(filechooser.path, filechooser.selection)

<SettingScreen@Screen>:
    timer_min_property: timer_min_id
    timer_max_property: timer_max_id
    cut_songs_lv_property: cut_songs_lv_id

    BoxLayout:
        orientation: 'vertical'

        ListView:
            id: cut_songs_lv_id
            adapter:
                la.ListAdapter(
                data=root.cut_songs_property,
                cls=lv.ListItemButton)

        BoxLayout:
            orientation: 'horizontal'

            Button:
                text: u'+'
                on_press: root.show_load()

            Button:
                text: u'-'
                on_press: root.delete_music()

        BoxLayout:
            orientation: 'horizontal'
            spacing: 10
            MDLabel:
                markup: True
                text: 'Timer:'
            TextInput:
                id: timer_min_id
                text: '1'
                on_text_validate: root.on_timer_min_changed()
            TextInput:
                id: timer_max_id
                text: '10'
                on_text_validate: root.on_timer_max_changed()

<AboutScreen@Screen>:
    BoxLayout:
        orientation: 'vertical'

        MDLabel:
            markup: True
            text: '[size=45][b][color=00BFFF]Jukebar for drinkers[/color][/b][/size]\nNew line.'


<MainScreen@Screen>:

    MDRaisedButton:
        text: 'Start Juke'
        elevation_normal: 2
        opposite_colors: True
        size_hint: None, None
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        on_release: root.toggle_juke_action(self)


<JukebarNavigationDrawer>

    title: "NavigationDrawer"

    NavigationDrawerIconButton:
        icon: 'circle'
        text: "Jukebar"
        on_release:
            app.root.ids.screen_manager.current = 'main'

    NavigationDrawerIconButton:
        icon: 'circle'
        text: "Settings"
        on_release:
            app.root.ids.screen_manager.current = 'setting'

    NavigationDrawerIconButton:
        icon: 'circle'
        text: "About"
        on_release: app.root.ids.screen_manager.current = 'about'


<Controller>:

    BoxLayout:
        orientation: 'vertical'

        Toolbar:
            id: toolbar_id
            title: 'Jukebar'
            background_color: app.theme_cls.primary_color
            left_action_items: [['menu', lambda x: app.nav_drawer.toggle()]]
            # left_action_items: [['arrow-left', lambda x: None]]
            right_action_items: [['more-vert', lambda x: app.nav_drawer.toggle()]]

        ScreenManager:
            id: screen_manager

            MainScreen:
                id: main_screen_id
                name: 'main'

            AboutScreen:
                id: about_screen_id
                name: 'about'

            SettingScreen:
                id: setting_screen_id
                name: 'setting'
